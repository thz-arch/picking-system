<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Picking Interface v2.0</title>
  <link rel="icon" type="image/x-icon" href="/static/img/binho.ico">
  <link rel="stylesheet" href="/static/css/style_v2.css?v=20251028v22">
</head>
<body>

  <div class="container">
    <!-- Logo -->
    <div id="logo-topo">
      <img src="/static/img/binho-logo.png" alt="Binho Transportes">
    </div>
    <h1>Separa√ß√£o de Pedidos v2.0</h1>

    <!-- Tela de sele√ß√£o de filial -->
    <section id="telaFiliais">
      <h2>Selecione a Filial</h2>
      <div id="listaFiliais" class="filiais-grid"></div>
    </section>

    <!-- Tela de lista de CTRCs -->
    <section id="telaCtrcList" style="display:none;">
      <button id="btnVoltarFiliais" class="btn-secondary mb-md">
        <span>‚Üê</span>
        <span>Trocar Filial</span>
      </button>
      <h2>Selecione o CTRC para Separa√ß√£o</h2>
      <div id="filialAtual" class="filial-badge"></div>
      <ul id="listaCtrcs"></ul>
    </section>

    <!-- Tela de separa√ß√£o -->
    <section id="telaSeparacao" style="display:none;">
      <button id="btnVoltar" class="btn-secondary">
        <span>‚Üê</span>
        <span>Voltar</span>
      </button>
      
      <h2>Dados do CTRC</h2>
      <div id="dadosCtrc"></div>
      
      <h2>Itens do Picking</h2>
      
      <!-- Campo oculto para scanner -->
      <input 
        type="text" 
        id="inputBipagemGlobal" 
        autocomplete="off"
        readonly
        style="position:absolute; opacity:0; width:1px; height:1px; top:0; left:0;"
        tabindex="1">
      
      <div id="resultado"></div>
      
      <button id="btnFinalizarPicking" class="btn-success btn-lg" disabled>
        <span>‚úì</span>
        <span>Finalizar Picking</span>
      </button>
    </section>
    
    <!-- Tela de hist√≥rico -->
    <section id="telaHistorico" style="display:none;">
      <div class="flex-row mb-md" style="display: flex; gap: 10px;">
        <button id="btnVoltarHistorico" class="btn-secondary">
          <span>‚Üê</span>
          <span>Voltar</span>
        </button>
        <button id="btnExportarHistorico" class="btn-info">
          <span>üíæ</span>
          <span>Exportar JSON</span>
        </button>
      </div>
      
      <h2>Hist√≥rico de Pickings</h2>
      <div id="historicoContainer"></div>
    </section>

    <!-- Tela de Checklist -->
    <section id="telaChecklist" style="display:none; height: 90vh;">
      <button id="btnVoltarChecklist" class="btn-secondary mb-md">
        <span>‚Üê</span>
        <span>Voltar para Lista</span>
      </button>
      <iframe id="iframeChecklist" src="" style="width: 100%; height: calc(100% - 60px); border: 2px solid #ddd; border-radius: 8px; background: white;"></iframe>
    </section>
  </div>

  <!-- Scripts -->
  <script src="/static/js/utils.js?v=20251028v22"></script>
  <script src="/static/js/ui-components.js?v=20251028v22"></script>
  <script src="/static/js/picking-manager.js?v=20251028v22"></script>
  <script src="/static/js/main_v2.js?v=20251028v22"></script>

</body>
</html>
